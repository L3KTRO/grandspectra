<div class="profile-container" *ngIf="user()">
  <!-- Cabecera del perfil -->
  <div class="profile-header">
    <div class="profile-info">
      <div style="display: flex; flex-direction: row; align-items: center; align-content: center">
        <div class="profile-avatar">
          <img ngSrc="assets/user.svg" alt="Avatar de usuario" height="400" width="400">
        </div>
        <div class="profile-username">
          <h4 *ngIf="user()">{{ user().username }}</h4>
          @if (me() && me().id === user().id) {
            <div class="button" (click)="logout()"><h5 style="margin: 0.25rem 0.5rem">LOGOUT</h5></div>
          } @else if (me() && me().id !== user().id) {
            <div class="button"><h5 style="margin: 0.25rem 0.5rem">FOLLOW</h5></div>
          }
        </div>
      </div>

      <div class="profile-stats">
        <div class="stat-item">
          <span class="stat-number">{{ moviesLength() }}</span>
          <span class="stat-label">films</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ tvLength() }}</span>
          <span class="stat-label">tv</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ user().followers.length }}</span>
          <span class="stat-label">followers</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ user().following.length }}</span>
          <span class="stat-label">following</span>
        </div>
      </div>
    </div>
  </div>

  <div class="content-section">
    <h2 class="section-title">Recent ratings</h2>
    <app-contentlist [content]="ratings()"/>
  </div>

  <div class="content-section">
    <h2 class="section-title">Watchlist</h2>
    <app-contentlist [content]="watchlist()"/>
  </div>
  <div class="content-section">
    <h2 class="section-title">Recent watched</h2>
    <app-contentlist [content]="watched()"/>
  </div>

  <div class="content-section" *ngIf="this.user().content_lists.length > 0">
    <h2 class="section-title">My lists</h2>
    <div class="lists">
      <div *ngFor="let list of this.user().content_lists">
        <app-lists-visualizer [list]="list"/>
      </div>
    </div>
  </div>

  <div class="content-section" *ngIf="this.user().content_lists_saved.length > 0">
    <h2 class="section-title">Saved lists</h2>
    <div class="lists">
      <div *ngFor="let list of this.user().content_lists_saved">
        <app-lists-visualizer [list]="list"/>
      </div>
    </div>
  </div>

</div>
